<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Promethus on 南宫乘风</title>
        <link>https://www.ownit.top/tags/promethus/</link>
        <description>Recent content in Promethus on 南宫乘风</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Mon, 13 Jan 2020 16:52:18 +0000</lastBuildDate><atom:link href="https://www.ownit.top/tags/promethus/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Promethus(普罗米修斯）的Grafana&#43;onealert实现报警功能</title>
        <link>https://www.ownit.top/p/202001131652/</link>
        <pubDate>Mon, 13 Jan 2020 16:52:18 +0000</pubDate>
        
        <guid>https://www.ownit.top/p/202001131652/</guid>
        <description>&lt;img src="https://www.ownit.top/title_pic/67.jpg" alt="Featured image of post Promethus(普罗米修斯）的Grafana&#43;onealert实现报警功能" /&gt;&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;目录&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#1%e3%80%81Centos7%e5%ae%89%e8%a3%85Promethus%28%e6%99%ae%e7%bd%97%e7%b1%b3%e4%bf%ae%e6%96%af%ef%bc%89%e7%9b%91%e6%8e%a7%e7%b3%bb%e7%bb%9f%e5%ae%8c%e6%95%b4%e7%89%88&#34; &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#2%e3%80%81Promethus%28%e6%99%ae%e7%bd%97%e7%b1%b3%e4%bf%ae%e6%96%af%ef%bc%89%e7%9b%91%e6%8e%a7Mysql%e6%95%b0%e6%8d%ae%e5%ba%93&#34; &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#3%e3%80%81Promethus%28%e6%99%ae%e7%bd%97%e7%b1%b3%e4%bf%ae%e6%96%af%ef%bc%89%e5%ae%89%e8%a3%85Grafana%e5%8f%af%e8%a7%86%e5%8c%96%e5%9b%be%e5%bd%a2%e5%b7%a5%e5%85%b7&#34; &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#4%E3%80%81Promethus%E7%9A%84Grafana%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BAMySQL%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE&#34; &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#Grafana%2Bonealert%E6%8A%A5%E8%AD%A6&#34; &gt;Grafana+onealert报警&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#1%e3%80%81%20%e5%85%88%e5%9c%a8onealert%e9%87%8c%e6%b7%bb%e5%8a%a0grafana%e5%ba%94%e7%94%a8%28%e7%94%b3%e8%af%b7onealert%e8%b4%a6%e5%8f%b7%29&#34; &gt;1、 先在onealert里添加grafana应用(申请onealert账号)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#2%e3%80%81%e5%9c%a8Grafana%e4%b8%ad%e9%85%8d%e7%bd%aeWebhook%20URL&#34; &gt;2、在Grafana中配置Webhook URL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%e7%8e%b0%e5%9c%a8%e5%8f%af%e4%bb%a5%e5%8e%bb%e8%ae%be%e7%bd%ae%e4%b8%80%e4%b8%aa%e6%8a%a5%e8%ad%a6%e6%9d%a5%e6%b5%8b%e8%af%95%e4%ba%86%28%e8%bf%99%e9%87%8c%e4%bb%a5%e6%88%91%e4%bb%ac%e5%89%8d%e9%9d%a2%e5%8a%a0%e7%9a%84cpu%e8%b4%9f%e8%bd%bd%e7%9b%91%e6%8e%a7%e6%9d%a5%20%e5%81%9a%e6%b5%8b%e8%af%95%29&#34; &gt;现在可以去设置一个报警来测试了(这里以我们前面加的cpu负载监控来 做测试)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E6%9C%80%E7%BB%88%E7%9A%84%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E6%95%88%E6%9E%9C%EF%BC%9A&#34; &gt;最终的邮件报警效果：&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E6%B5%8B%E8%AF%95mysql%E9%93%BE%E6%8E%A5%E6%95%B0%E6%8A%A5%E8%AD%A6&#34; &gt;测试mysql链接数报警&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E6%80%BB%E7%BB%93%E6%8A%A5%E8%AD%A6%E4%B8%8D%E6%88%90%E5%8A%9F%E7%9A%84%E5%8F%AF%E8%83%BD%E5%8E%9F%E5%9B%A0&#34; &gt;总结报警不成功的可能原因&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E6%89%A9%E5%B1%95&#34; &gt;扩展&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h1 id=&#34;grafanaonealert报警&#34;&gt;Grafana+onealert报警&lt;/h1&gt;
&lt;p&gt;prometheus报警需要使用alertmanager这个组件，而且报警规则需要手 动编写(对运维来说不友好)。所以我这里选用grafana+onealert报警。&lt;/p&gt;
&lt;p&gt;注意: 实现报警前把所有机器时间同步再检查一遍.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ntpdate time.windows.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;1-先在onealert里添加grafana应用申请onealert账号&#34;&gt;1、 先在onealert里添加grafana应用(申请onealert账号)&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://caweb.aiops.com/#/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://caweb.aiops.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113161638506.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113161840200.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113161917501.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;2在grafana中配置webhook-url&#34;&gt;2、在Grafana中配置Webhook URL&lt;/h2&gt;
&lt;p&gt;1、在Grafana中创建Notification channel，选择类型为Webhook；&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113162343122.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;2、推荐选中Send on all alerts和Include image，Cloud Alert体验更佳；&lt;/p&gt;
&lt;p&gt;3、将第一步中生成的Webhook URL填入Webhook settings Url；&lt;/p&gt;
&lt;p&gt;4、Http Method选择POST；&lt;/p&gt;
&lt;p&gt;5、Send Test&amp;amp;Save；&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113162656163.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113162840747.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;现在可以去设置一个报警来测试了这里以我们前面加的cpu负载监控来-做测试&#34;&gt;现在可以去设置一个报警来测试了(这里以我们前面加的cpu负载监控来 做测试)&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113163106677.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;配置&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113163345919.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113163324830.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;保存后就可以测试了&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113163729952.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果node1上的cpu负载还没有到0.5，你可以试试0.1,或者运行一些程序 把node1负载调大。最终能测试报警成功&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113163902132.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;模拟cpu负载&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat /dev/urandom | md5sum
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt; &lt;/p&gt;
&lt;h2 id=&#34;最终的邮件报警效果&#34;&gt;最终的邮件报警效果：&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164329432.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164457435.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;测试mysql链接数报警&#34;&gt;测试mysql链接数报警&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164810425.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164821235.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164837652.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164839384.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113164902506.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;总结报警不成功的可能原因&#34;&gt;总结报警不成功的可能原因&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;各服务器之间时间不同步，这样时序数据会出问题，也会造成报警出问 题&lt;/li&gt;
&lt;li&gt;必须写通知内容，留空内容是不会发报警的&lt;/li&gt;
&lt;li&gt;修改完报警配置后，记得要点右上角的保存&lt;/li&gt;
&lt;li&gt;保存配置后，需要由OK状态变为alerting状态才会报警(也就是说，你 配置保存后，就已经是alerting状态是不会报警的)&lt;/li&gt;
&lt;li&gt;grafana与onealert通信有问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;扩展&#34;&gt;扩展&lt;/h1&gt;
&lt;p&gt;prometheus目前还在发展中，很多相应的监控都需要开发。但在官网的 dashboard库中,也有一些官方和社区开发人员开发的dashboard可以直接 拿来用。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113165033603.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113165056782.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113165113140.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;相关博文&#34;&gt;相关博文&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;</description>
        </item>
        <item>
        <title>Promethus的Grafana图形显示MySQL监控数据</title>
        <link>https://www.ownit.top/p/202001131542/</link>
        <pubDate>Mon, 13 Jan 2020 15:42:22 +0000</pubDate>
        
        <guid>https://www.ownit.top/p/202001131542/</guid>
        <description>&lt;img src="https://www.ownit.top/title_pic/12.jpg" alt="Featured image of post Promethus的Grafana图形显示MySQL监控数据" /&gt;&lt;h1 id=&#34;相关博文&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;目录&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#Grafana%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BAMySQL%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE&#34; &gt;Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%e2%91%a0%20%e5%9c%a8grafana%e4%b8%8a%e4%bf%ae%e6%94%b9%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6,%e5%b9%b6%e4%b8%8b%e8%bd%bd%e5%ae%89%e8%a3%85mysql%e7%9b%91%e6%8e%a7%e7%9a%84dashboard%ef%bc%88%e5%8c%85%e5%90%ab%20%e7%9b%b8%e5%85%b3json%e6%96%87%e4%bb%b6%ef%bc%8c%e8%bf%99%e4%ba%9bjson%e6%96%87%e4%bb%b6%e5%8f%af%e4%bb%a5%e7%9c%8b%e4%bd%9c%e6%98%af%e5%bc%80%e5%8f%91%e4%ba%ba%e5%91%98%e5%bc%80%e5%8f%91%e7%9a%84%e4%b8%80%e4%b8%aa%e7%9b%91%e6%8e%a7%e6%a8%a1%e6%9d%bf%29&#34; &gt;① 在grafana上修改配置文件,并下载安装mysql监控的dashboard（包含 相关json文件，这些json文件可以看作是开发人员开发的一个监控模板)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%e2%91%a1%20%e5%9c%a8grafana%e5%9b%be%e5%bd%a2%e7%95%8c%e9%9d%a2%e5%af%bc%e5%85%a5%e7%9b%b8%e5%85%b3json%e6%96%87%e4%bb%b6&#34; &gt;② 在grafana图形界面导入相关json文件&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;grafana图形显示mysql监控数据&#34;&gt;Grafana图形显示MySQL监控数据&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2 id=&#34;-在grafana上修改配置文件并下载安装mysql监控的dashboard包含-相关json文件这些json文件可以看作是开发人员开发的一个监控模板&#34;&gt;① 在grafana上修改配置文件,并下载安装mysql监控的dashboard（包含 相关json文件，这些json文件可以看作是开发人员开发的一个监控模板)&lt;/h2&gt;
&lt;p&gt;参考网址: &lt;a class=&#34;link&#34; href=&#34;https://github.com/percona/grafana-dashboards&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/percona/grafana-dashboards&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在grafana配置文件里最后加上以下三行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /etc/grafana/grafana.ini 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;dashboards.json&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;enabled&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; /var/lib/grafana/dashboards
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113150203274.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113150322470.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;下载配置模板&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /var/lib/grafana/ 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://github.com/percona/grafana-dashboards.git 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cp -r /var/lib/grafana/grafana-dashboards-master/dashboards/ /var/lib/grafana/ 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113151342364.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;重启grafana服务&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart grafana-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;-在grafana图形界面导入相关json文件&#34;&gt;② 在grafana图形界面导入相关json文件&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113151442401.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113151636828.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;③ 点import导入后,报prometheus数据源找不到,因为这些json文件里默认 要找的就是叫Prometheus的数据源，但我们前面建立的数据源却是叫 prometheus_data(坑啊)&lt;br&gt;
那么请自行把原来的prometheus_data源改名为Prometheus即可(注意: 第一个字母P是大写)&lt;br&gt;
然后再回去刷新,就有数据了(如下图所示)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/2020011315383743.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;相关博文-1&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;</description>
        </item>
        <item>
        <title>Promethus(普罗米修斯）安装Grafana可视化图形工具</title>
        <link>https://www.ownit.top/p/202001131427/</link>
        <pubDate>Mon, 13 Jan 2020 14:27:19 +0000</pubDate>
        
        <guid>https://www.ownit.top/p/202001131427/</guid>
        <description>&lt;img src="https://www.ownit.top/title_pic/54.jpg" alt="Featured image of post Promethus(普罗米修斯）安装Grafana可视化图形工具" /&gt;&lt;h1 id=&#34;相关博文&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113144441132.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;教程使用的软件：链接: &lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/1QV4KYZksyIp65UsScioq4Q&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pan.baidu.com/s/1QV4KYZksyIp65UsScioq4Q&lt;/a&gt; 提取码: vcej&lt;/p&gt;
&lt;p&gt;环境配置&lt;/p&gt;
&lt;table border=&#34;1&#34; cellpadding=&#34;1&#34; cellspacing=&#34;1&#34;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;服务器&lt;/td&gt;&lt;td&gt;IP地址&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Prometneus服务器&lt;/td&gt;&lt;td&gt;192.168.116.129&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;被监控服务器（mysql）&lt;/td&gt;&lt;td&gt;192.168.116.130&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;grafana服务器&lt;/td&gt;&lt;td&gt;192.168.116.131&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;h1 id=&#34;1什么是grafana&#34;&gt;1、什么是Grafana&lt;/h1&gt;
&lt;p&gt; Grafana是一个开源的度量分析和可视化工具，可以通过将采集的数据分 析，查询，然后进行可视化的展示,并能实现报警。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113140317374.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;网址: &lt;a class=&#34;link&#34; href=&#34;https://grafana.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://grafana.com/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;2使用grafana连接prometheus&#34;&gt;2、使用Grafana连接Prometheus&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h2 id=&#34;-在grafana服务器上安装grafana&#34;&gt;① 在grafana服务器上安装grafana&lt;/h2&gt;
&lt;p&gt;下载地址:&lt;a class=&#34;link&#34; href=&#34;https://grafana.com/grafana/download&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://grafana.com/grafana/download&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上传grafana-5.3.4-1.x86_64.rpm&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113140643778.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;我这里选择的rpm包，下载后直接rpm -ivh安装就OK【失败原因缺少组件，可以yum安装组件】&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rpm -ivh /root/Desktop/grafana-5.3.41.x86_64.rpm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113140719321.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;或者第二种方法【yum安装会自动安装缺少的组件的】&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum install -y grafana-5.3.4-1.x86_64.rpm 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113140902426.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;启动服务&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl start grafana-server 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl enable grafana-server 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;确认端口(3000)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lsof -i:3000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141145828.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;-通过浏览器访问-http-grafana服务器ip3000就到了登录界面使用默-认的admin用户admin密码就可以登陆了&#34;&gt;② 通过浏览器访问 http:// grafana服务器IP:3000就到了登录界面,使用默 认的admin用户,admin密码就可以登陆了&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141221182.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;-下面我们把prometheus服务器收集的数据做为一个数据源添加到-grafana让grafana可以得到prometheus的数据&#34;&gt;③ 下面我们把prometheus服务器收集的数据做为一个数据源添加到 grafana,让grafana可以得到prometheus的数据。&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141320184.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141836837.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141918275.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;-然后为添加好的数据源做图形显示&#34;&gt;④ 然后为添加好的数据源做图形显示&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141945357.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113141955537.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113142000200.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113142330949.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;-保存&#34;&gt;⑤ 保存&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113142408364.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;-最后在dashboard可以查看到&#34;&gt;⑥ 最后在dashboard可以查看到&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/2020011314245957.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;⑦ 匹配条件显示&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113142634216.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;相关博文-1&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;</description>
        </item>
        <item>
        <title>Promethus(普罗米修斯）监控Mysql数据库</title>
        <link>https://www.ownit.top/p/202001131359/</link>
        <pubDate>Mon, 13 Jan 2020 13:59:14 +0000</pubDate>
        
        <guid>https://www.ownit.top/p/202001131359/</guid>
        <description>&lt;img src="https://www.ownit.top/title_pic/22.jpg" alt="Featured image of post Promethus(普罗米修斯）监控Mysql数据库" /&gt;&lt;h1 id=&#34;相关博文&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Promethus(普罗米修斯）监控Mysql数据库&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这个是基于上面环境搭建的，需要的可以访问方面连接查看。&lt;/p&gt;
&lt;p&gt;教程使用的软件：链接: &lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/1QV4KYZksyIp65UsScioq4Q&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pan.baidu.com/s/1QV4KYZksyIp65UsScioq4Q&lt;/a&gt; 提取码: vcej&lt;/p&gt;
&lt;p&gt;监控远程MySQL&lt;/p&gt;
&lt;table border=&#34;1&#34; cellpadding=&#34;1&#34; cellspacing=&#34;1&#34;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;服务器&lt;/td&gt;&lt;td&gt;IP地址&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Prometneus服务器&lt;/td&gt;&lt;td&gt;192.168.116.129&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;被监控服务器（mysql）&lt;/td&gt;&lt;td&gt;192.168.116.130&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;grafana服务器&lt;/td&gt;&lt;td&gt;192.168.116.131&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;① 在被管理机agent1上安装mysqld_exporter组件&lt;br&gt;
下载地址: &lt;a class=&#34;link&#34; href=&#34;&#34; &gt;https://prometheus.io/download/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上传mysqld_exporter组件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113134228354.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;安装mysqld_exporter组件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar xf mysqld_exporter-0.11.0.linux-amd64.tar.gz -C /usr/local/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv /usr/local/mysqld_exporter-0.11.0.linux-amd64/  /usr/local/mysqld_exporter 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ls /usr/local/mysqld_exporter
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113134407909.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;安装mariadb数据库,并授权&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum install mariadb&lt;span class=&#34;se&#34;&gt;\*&lt;/span&gt; -y 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart mariadb 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; mariadb 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mysql
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;MariaDB &lt;span class=&#34;o&#34;&gt;[(&lt;/span&gt;none&lt;span class=&#34;o&#34;&gt;)]&lt;/span&gt;&amp;gt; grant &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt;,replication client,process ON *.* to &lt;span class=&#34;s1&#34;&gt;&amp;#39;mysql_monitor&amp;#39;&lt;/span&gt;@&lt;span class=&#34;s1&#34;&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt; identified by &lt;span class=&#34;s1&#34;&gt;&amp;#39;123&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;(注意:授权ip为localhost，因为不是prometheus服务器来直接找mariadb 获取数据，而是prometheus服务器找mysql_exporter,mysql_exporter 再找mariadb。所以这个localhost是指的mysql_exporter的IP)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;MariaDB &lt;span class=&#34;o&#34;&gt;[(&lt;/span&gt;none&lt;span class=&#34;o&#34;&gt;)]&lt;/span&gt;&amp;gt; flush privileges&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;MariaDB &lt;span class=&#34;o&#34;&gt;[(&lt;/span&gt;none&lt;span class=&#34;o&#34;&gt;)]&lt;/span&gt;&amp;gt; quit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113134730612.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;创建一个mariadb配置文件，写上连接的用户名与密码(和上面的授权的用户名 和密码要对应)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /usr/local/mysqld_exporter/.my.cnf 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;client&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;mysql_monitor
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;123&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113134832725.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;启动mysqld_exporter&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nohup /usr/local/mysqld_exporter/mysqld_exporter --config.my-cnf=/usr/local/mysqld_exporter/.my.cnf &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;确认端口(9104)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113135034738.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;② 回到prometheus服务器的配置文件里添加被监控的mariadb的配置段&lt;/p&gt;
&lt;p&gt;在主配置文件最后再加上下面三行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /usr/local/prometheus/prometheus.yml 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  - job_name: &amp;#39;mariadb&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    static_configs:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    - targets: [&amp;#39;192.168.116.130:9104&amp;#39;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113135509648.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- job_name: &amp;#39;agent1_mariadb&amp;#39;  # 取一个job 名称来代表被监控的mariadb   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  static_configs:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  - targets: [&amp;#39;10.1.1.14:9104&amp;#39;]     # 这里改成 被监控机器的IP，后面端口接9104
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;改完配置文件后,重启服务&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; pkill prometheus 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/local/prometheus/prometheus --config.file=&amp;#34;/usr/local/prometheus/prometheus.yml&amp;#34; &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;③ 回到web管理界面 --》点Status --》点Targets --》可以看到监控 mariadb了&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113135803881.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113135844886.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;相关博文-1&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;</description>
        </item>
        <item>
        <title>Centos7安装Promethus(普罗米修斯）监控系统完整版</title>
        <link>https://www.ownit.top/p/202001131040/</link>
        <pubDate>Mon, 13 Jan 2020 10:40:01 +0000</pubDate>
        
        <guid>https://www.ownit.top/p/202001131040/</guid>
        <description>&lt;img src="https://www.ownit.top/title_pic/34.jpg" alt="Featured image of post Centos7安装Promethus(普罗米修斯）监控系统完整版" /&gt;&lt;h1 id=&#34;相关博文&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;目录&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E4%B8%80%E3%80%81%E6%99%AE%E7%BD%97%E7%B1%B3%E4%BF%AE%E6%96%AF%E6%A6%82%E8%BF%B0&#34; &gt;一、普罗米修斯概述&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E4%BA%8C%E3%80%81%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE&#34; &gt;二、时间序列数据&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE&#34; &gt;1、什么是序列数据&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#2%E3%80%81%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE%E7%89%B9%E7%82%B9&#34; &gt;2、时间序列数据特点&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#3%E3%80%81Prometheus%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E5%BE%81&#34; &gt;3、Prometheus的主要特征&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#4%E3%80%81%E6%99%AE%E7%BD%97%E7%B1%B3%E4%BF%AE%E6%96%AF%E5%8E%9F%E7%90%86%E6%9E%B6%E6%9E%84%E5%9B%BE&#34; &gt;4、普罗米修斯原理架构图&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#%E4%B8%89%E3%80%81%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87&#34; &gt;三、实验环境准备&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#1%E3%80%81%E5%AE%89%E8%A3%85prometheus&#34; &gt;1、安装prometheus&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#2%E3%80%81prometheus%E7%95%8C%E9%9D%A2&#34; &gt;2、prometheus界面&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#3%E3%80%81%E4%B8%BB%E6%9C%BA%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA&#34; &gt;3、主机数据展示&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;#4%E3%80%81%E7%9B%91%E6%8E%A7%E8%BF%9C%E7%A8%8BLinux%E4%B8%BB%E6%9C%BA&#34; &gt;4、监控远程Linux主机&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;一普罗米修斯概述&#34;&gt;一、普罗米修斯概述&lt;/h1&gt;
&lt;p&gt;Prometheus(由go语言(golang)开发)是一套开源的监控&amp;amp;报警&amp;amp;时间序列数 据库的组合。适合监控docker容器。因为kubernetes(俗称k8s)的流行带动 了prometheus的发展。&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://prometheus.io/docs/introduction/overview/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://prometheus.io/docs/introduction/overview/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;二时间序列数据&#34;&gt;二、时间序列数据&lt;/h1&gt;
&lt;h2 id=&#34;1什么是序列数据&#34;&gt;1、什么是序列数据&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;时间序列数据&lt;/strong&gt;(TimeSeries Data) : 按照时间顺序记录系统、设备状态变化 的数据被称为时序数据。&lt;br&gt;
应用的场景很多, 如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;无人驾驶车辆运行中要记录的经度，纬度，速度，方向，旁边物体的距 离等等。每时每刻都要将数据记录下来做分析。&lt;/li&gt;
&lt;li&gt;某一个地区的各车辆的行驶轨迹数据&lt;/li&gt;
&lt;li&gt;传统证券行业实时交易数据&lt;/li&gt;
&lt;li&gt;实时运维监控数据等&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2时间序列数据特点&#34;&gt;2、时间序列数据特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;性能好&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关系型数据库对于大规模数据的处理性能糟糕。NOSQL可以比较好的处理 大规模数据，让依然比不上时间序列数据库。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;存储成本低&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;高效的压缩算法，节省存储空间，有效降低IO&lt;br&gt;
Prometheus有着非常高效的时间序列数据存储方法，每个采样数据仅仅占 用3.5byte左右空间，上百万条时间序列，30秒间隔，保留60天，大概花了 200多G（来自官方数据)&lt;/p&gt;
&lt;h2 id=&#34;3prometheus的主要特征&#34;&gt;3、Prometheus的主要特征&lt;/h2&gt;
&lt;p&gt;多维度数据模型 灵活的查询语言 不依赖分布式存储，单个服务器节点是自主的 以HTTP方式，通过pull模型拉去时间序列数据        也可以通过中间网关支持push模型 通过服务发现或者静态配置，来发现目标服务对象 支持多种多样的图表和界面展示&lt;/p&gt;
&lt;h2 id=&#34;4普罗米修斯原理架构图&#34;&gt;4、普罗米修斯原理架构图&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113095930827.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h1 id=&#34;三实验环境准备&#34;&gt;三、实验环境准备&lt;/h1&gt;
&lt;table border=&#34;1&#34; cellpadding=&#34;1&#34; cellspacing=&#34;1&#34; style=&#34;width:500px;&#34;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;服务器&lt;/td&gt;&lt;td&gt;IP地址&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Prometneus服务器&lt;/td&gt;&lt;td&gt;192.168.116.129&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;被监控服务器&lt;/td&gt;&lt;td&gt;192.168.116.130&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;grafana服务器&lt;/td&gt;&lt;td&gt;192.168.116.131&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
 
&lt;p&gt;教程使用的软件：链接: &lt;a class=&#34;link&#34; href=&#34;https://pan.baidu.com/s/1QV4KYZksyIp65UsScioq4Q&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pan.baidu.com/s/1QV4KYZksyIp65UsScioq4Q&lt;/a&gt; 提取码: vcej&lt;/p&gt;
&lt;p&gt;失效可联系我&lt;/p&gt;
&lt;p&gt;1. 静态ip(要求能上外网)&lt;/p&gt;
&lt;p&gt;2. 主机名&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;各自配置好主机名 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# hostnamectl set-hostname --static server.cluster.com &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;三台都互相绑定IP与主机名 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# vim /etc/hosts            &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;192.168.116.129  master
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;192.168.116.130  node1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;192.168.116.131  node2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;echo &amp;#34;192.168.116.129 master
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;192.168.116.130 node1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;192.168.116.131 node2&amp;#34;&amp;gt;&amp;gt;/etc/hosts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;3. 时间同步(时间同步一定要确认一下)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; yum install -y  ntpdate &amp;amp;&amp;amp; ntpdate time.windows.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;4. 关闭防火墙,selinux&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# systemctl stop firewalld 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# systemctl disable firewalld 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# iptables -F
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;1安装prometheus&#34;&gt;1、安装prometheus&lt;/h2&gt;
&lt;p&gt;从 &lt;a class=&#34;link&#34; href=&#34;&#34; &gt;https://prometheus.io/download/&lt;/a&gt; 下载相应版本，安装到服务器上&lt;br&gt;
官网提供的是二进制版，解压就能用，不需要编译&lt;/p&gt;
&lt;p&gt;上传prometheus-2.5.0.linux-amd64.tar.gz&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113101351305.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar -zxvf prometheus-2.5.0.linux-amd64.tar.gz -C /usr/local/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv /usr/local/prometheus-2.5.0.linux-amd64/  /usr/local/prometheus
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113101544140.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;直接使用默认配置文件启动&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/local/prometheus/prometheus --config.file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/prometheus/prometheus.yml&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;确认端口(9090)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ss -anltp | grep 9090
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113101750160.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;2prometheus界面&#34;&gt;2、prometheus界面&lt;/h2&gt;
&lt;p&gt;通过浏览器访问http://服务器IP:9090就可以访问到prometheus的主界面&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113101851876.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;默认只监控了本机一台，点Status --》点Targets --》可以看到只监控了本 机&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/2020011310193370.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;3主机数据展示&#34;&gt;3、主机数据展示&lt;/h2&gt;
&lt;p&gt;通过http://服务器IP:9090/metrics可以查看到监控的数据&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113102009365.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在web主界面可以通过关键字查询监控项&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113102110196.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;4监控远程linux主机&#34;&gt;4、监控远程Linux主机&lt;/h2&gt;
&lt;p&gt;① 在远程linux主机(被监控端agent1)上安装node_exporter组件&lt;br&gt;
下载地址: &lt;a class=&#34;link&#34; href=&#34;https://prometheus.io/download/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://prometheus.io/download/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上传node_exporter-0.16.0.linux-amd64.tar.gz&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113102232475.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar -zxvf node_exporter-0.16.0.linux-amd64.tar.gz -C /usr/local/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mv /usr/local/node_exporter-0.16.0.linux-amd64/ /usr/local/node_exporter
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;里面就一个启动命令node_exporter,可以直接使用此命令启动&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nohup /usr/local/node_exporter/node_exporter &amp;amp; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/2020011310252095.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;确认端口(9100)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113102549361.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;扩展: nohup命令: 如果把启动node_exporter的终端给关闭,那么进程也会 随之关闭。nohup命令会帮你解决这个问题。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;② 通过浏览器访问http://被监控端IP:9100/metrics就可以查看到 node_exporter在被监控端收集的监控信息&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113102712354.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;③ 回到prometheus服务器的配置文件里添加被监控机器的配置段&lt;/p&gt;
&lt;p&gt;在主配置文件最后加上下面三行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /usr/local/prometheus/prometheus.yml 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  - job_name: &lt;span class=&#34;s1&#34;&gt;&amp;#39;node1&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    static_configs:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    - targets: &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;192.168.116.130:9100&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113103626972.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- job_name: &lt;span class=&#34;s1&#34;&gt;&amp;#39;agent1&amp;#39;&lt;/span&gt;                   &lt;span class=&#34;c1&#34;&gt;# 取一个job名称来代 表被监控的机器   &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  static_configs:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  - targets: &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;10.1.1.14:9100&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;# 这里改成被监控机器 的IP，后面端口接9100&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;改完配置文件后,重启服务&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; pkill prometheus 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;确认端口没有进程占用&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113103154560.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/local/prometheus/prometheus --config.file=&amp;#34;/usr/local/prometheus/prometheus.yml&amp;#34; &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt; 确认端口被占用，说 明重启成功&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113103316583.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;④ 回到web管理界面 --》点Status --》点Targets --》可以看到多了一台监 控目标&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.ownit.top/../../image/20200113103730436.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;练习: 加上本机prometheus的监控&lt;br&gt;
答: 在本机安装node_exporter，也使用上面的方式监控起来。&lt;/p&gt;
&lt;h1 id=&#34;相关博文-1&#34;&gt;相关博文：&lt;/h1&gt;
&lt;h1 id=&#34;1centos7安装promethus普罗米修斯监控系统完整版httpsblogcsdnnetheian_99articledetails103952955-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103952955&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;1、Centos7安装Promethus(普罗米修斯）监控系统完整版&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;2promethus普罗米修斯监控mysql数据库httpsblogcsdnnetheian_99articledetails103956583-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956583&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2、Promethus(普罗米修斯）监控Mysql数据库&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;3promethus普罗米修斯安装grafana可视化图形工具httpsblogcsdnnetheian_99articledetails103956931-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103956931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3、Promethus(普罗米修斯）安装Grafana可视化图形工具&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;4promethus的grafana图形显示mysql监控数据httpsblogcsdnnetheian_99articledetails103958032-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103958032&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;4、Promethus的Grafana图形显示MySQL监控数据&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;5promethus普罗米修斯的grafanaonealert实现报警功能httpsblogcsdnnetheian_99articledetails103959379-1&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/heian_99/article/details/103959379&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;5、Promethus(普罗米修斯）的Grafana+onealert实现报警功能&lt;/a&gt;&lt;/h1&gt;</description>
        </item>
        
    </channel>
</rss>
